# Shell for DevOps

## Linux Filesystem

In a Linux distribution, several critical directories hold essential system files, configurations, and user data. Among these, `/etc`, `/var`, `/bin`, `/usr`, and `/home` are some of the most important directories.

`/etc`: This directory contains system-wide configuration files. It houses crucial settings for various services, software applications, and the system itself. Files such as `/etc/passwd` (user account information), `/etc/apt/sources.list` (APT package manager configuration), and `/etc/hostname` (system hostname) reside here. Administrators often tweak settings in this directory to manage system behavior and software configurations.

`/var`: This directory stores variable data generated by running processes. It includes files that change frequently during system operation, such as logs (`/var/log`), databases (`/var/lib`), mail (`/var/mail`), and temporary files (`/var/tmp`). System logs and application data often reside here, offering insights into system health and performance.

`/bin` and `/usr`: These directories contain executable binaries and essential system commands. `/bin` holds fundamental commands crucial for system booting and repair, while `/usr/bin` contains standard user commands and binaries for installed software.

`/home`: This directory houses user home directories. Each user typically has a dedicated subdirectory (`/home/username`) storing their personal files, configurations, and settings. It's a critical space for user-specific data, allowing customization and privacy for individual users.

These directories form the backbone of a Linux system, encompassing critical configurations, system data, executable files, and user-specific information essential for the system's functionality and user experience.

```bash
â”œâ”€â”€ bin                         # Essential system binaries.
â”‚   â”œâ”€â”€ /bin                    # Core command binaries.
â”‚   â”œâ”€â”€ /sbin                   # System binaries for administration tasks.
â”‚   â””â”€â”€ /usr                    # Additional user binaries.
â”‚       â””â”€â”€ /usr/bin            # User command binaries.
â”œâ”€â”€ boot                        # Boot-related files.
â”‚   â”œâ”€â”€ /boot/grub              # GRUB bootloader files and config.
â”‚   â””â”€â”€ /boot/kernel            # Kernel and related files.
â”œâ”€â”€ dev                         # Device files representing hardware devices.
â”‚   â”œâ”€â”€ /dev/pts                # Pseudo-terminal devices.
â”‚   â””â”€â”€ /dev/shm                # Shared memory files and objects.
â”œâ”€â”€ etc                         # System-wide configuration files.
â”‚   â”œâ”€â”€ /etc/network            # Network configuration files.
â”‚   â”œâ”€â”€ /etc/apt                # APT package manager configuration.
â”‚   â””â”€â”€ /etc/default            # Default config for various applications.
â”œâ”€â”€ home                        # User home directories.
â”‚   â”œâ”€â”€ /home/user1             # Individual user directories.
â”‚   â””â”€â”€ /home/user2
â”œâ”€â”€ lib                         # Essential shared libraries.
â”œâ”€â”€ media                       # Mount point for removable media.
â”œâ”€â”€ mnt                         # Temporary mount point for additional filesystems.
â”œâ”€â”€ opt                         # Optional third-party software.
â”œâ”€â”€ proc                        # Virtual filesystem providing process-related info.
â”œâ”€â”€ root                        # Home directory for the root user.
â”œâ”€â”€ run                         # System information since the last boot.
â”‚   â””â”€â”€ /run/user               # User-specific runtime info.
â”œâ”€â”€ sbin                        # System binaries for administration tasks.
â”œâ”€â”€ srv                         # Site-specific data served by the system.
â”œâ”€â”€ sys                         # Virtual filesystem with hardware device info.
â”œâ”€â”€ tmp                         # Temporary files, deleted upon reboot.
â”œâ”€â”€ usr                         # User-related programs and resources.
â”‚   â”œâ”€â”€ /usr/local              # Locally installed software.
â”‚   â””â”€â”€ /usr/share              # Architecture-independent data.
â””â”€â”€ var                         # Variable data, logs, caches, temporary files.
    â”œâ”€â”€ /var/log                # System log files.
    â””â”€â”€ /var/cache              # Cached data from installed packages.
```


## File permissions 

In Linux distributions, file permissions and ownership are managed through a robust system known as "rights management." This system controls access to files and directories, ensuring security and privacy across the system. Each file and directory has associated permissions determining who can read, write, or execute them. These permissions are categorized for three types of users: the file owner, the user group associated with the file, and others.

### Read file permisions

When you use `ls -l` in a terminal, you'll see an output similar to this:

```bash
-rwxr-xr-- 1 user group 4096 Jan 1 12:00 example.txt
```

Let's break down what each part of this output signifies:

- **File Permissions:** The `-rwxr-xr--` part represents permissions for the file.
  - The first character indicates file type (`-` for a regular file).
  - The next nine characters (`rwxr-xr--`) denote permissions for owner, group, and others.
    - The first three characters represent owner permissions (`rwx`).
    - The next three represent group permissions (`r-x`).
    - The last three represent permissions for others (`r--`).

- **File Owner and Group:** The `user` is the file's owner, and `group` is the group associated with the file.

- **File Size, Date, and Name:** The `4096 Jan 1 12:00 example.txt` part shows the file size, modification date, and file name.

#### Interpreting Permissions

- `r` denotes read permission.
- `w` denotes write permission.
- `x` denotes execute permission.
- `-` denotes lack of a specific permission.

For instance, in `-rwxr-xr--`:
- The owner (`rwx`) has read, write, and execute permissions.
- The group (`r-x`) has read and execute permissions.
- Others (`r--`) have only read permission.

This visual representation from `ls -l` allows you to quickly interpret file permissions and understand who has access to read, write, and execute the file.

### Changing Permissions

Permissions are modified using commands like `chmod`. For example, granting read and write permissions to the owner and group of a file named `example.txt`:

```bash
chmod ug+rw example.txt
```

### Ownership Management

Ownership is altered using `chown`. To change the owner of `example.txt` to `newowner`:

```bash
chown newowner example.txt
```

### Octal notation

Octal notation simplifies permission settings using three digits, each representing permission types for owner, group, and others.

For instance:
- `chmod 755 file.txt` sets:
  - Owner: Read (4) + Write (2) + Execute (1) = 7
  - Group and Others: Read (4) + Execute (1) = 5

This notation streamlines permission management, facilitating precise access control in Linux.

```bash
#!/bin/bash

# Changing permissions
chmod ug+rw example.txt

# Changing ownership
chown newowner example.txt
```

This script demonstrates using `chmod` and `chown` to modify file permissions and ownership, ensuring proper management and security within a Linux environment.

You can also Displays the directory structure in a tree-like format.

**Example:**
```bash
tree
```

## Basic Commands

#### `cd`

Change directory.

**Example:**
```bash
cd /path/to/directory
```

#### `ls`

List directory contents.

**Example:**
```bash
ls -l
```

- `-l`: Long format, displaying detailed information.

#### `pwd`

Print working directory.

**Example:**
```bash
pwd
```

## Package Managers

#### `apt`

Package manager for Debian-based systems.

**Example:**
```bash
apt update
```

- `update`: Updates the package index.

**Config Files:** 
- `sources.list`: Contains a list of repository URLs used by `apt`.
- `/etc/apt/sources.list.d/`: Additional sources for `apt`.

**Removing Packages:** 
- `apt remove package_name`: Removes a package.
- `apt purge package_name`: Removes a package along with its configuration files.

#### `yum`

Package manager for RPM-based systems like CentOS.

**Example:**
```bash
yum install package_name
```

**Config Files:** 
- `/etc/yum.conf`: Main configuration file for `yum`.
- `/etc/yum.repos.d/`: Directory containing repository configuration files.

**Removing Packages:** 
- `yum remove package_name`: Removes a package.

#### `dnf`

Package manager, newer version of `yum`, used in Fedora.

**Example:**
```bash
dnf search keyword
```

**Config Files:** 
- `/etc/dnf/dnf.conf`: Main configuration file for `dnf`.
- `/etc/yum.repos.d/`: Directory containing repository configuration files.

**Removing Packages:** 
- `dnf remove package_name`: Removes a package.

#### `pacman`

Package manager for Arch Linux.

**Example:**
```bash
pacman -Syu
```

- `-Syu`: Synchronizes package databases and upgrades installed packages.

**Config Files:** 
- `/etc/pacman.conf`: Main configuration file for `pacman`.
- `/etc/pacman.d/`: Directory containing repository configuration files.

**Removing Packages:** 
- `pacman -R package_name`: Removes a package.

## Basic Network Debugging

#### `ping`

Test connectivity to a remote host.

**Example:**
```bash
ping google.com
```

#### `ssh`

Securely connect to a remote server.

**Example:**
```bash
ssh username@hostname
```

#### `telnet`

Communicate with another host using the Telnet protocol (less secure).

**Example:**
```bash
telnet example.com 80
```

#### `wget`

Retrieve content from web servers via HTTP, HTTPS, FTP.

**Example:**
```bash
wget https://example.com/file.tar.gz
```

## Others


#### `grep`

Search for specific patterns in files.

**Example:**
```bash
grep "pattern" file.txt
```

- `-i`: Ignore case distinctions.
- `-r`: Recursively search subdirectories.
- `-n`: Show line numbers.

#### `sed`

Stream editor for modifying and formatting text.

**Example:**
```bash
sed 's/old_text/new_text/' file.txt
```

- `'s/old_text/new_text/'`: Substitute `old_text` with `new_text`.
- `-i`: Edit files in place.

#### `awk`

Text processing tool for extracting and manipulating data.

**Example:**
```bash
awk '{print $1}' file.txt
```

- `'{print $1}'`: Print the first field of each line.
- `-F`: Set field separator.

#### `ps`

Display information about running processes.

**Example:**
```bash
ps aux
```

- `aux`: Display all processes with a user-oriented format.

#### `top` or `htop`

Monitoring tools to view system processes and resource usage.

**Example:**
```bash
top
```

- `Shift + M`: Sort by memory usage in `top`.
- `F6` (in `htop`): Sort by various fields.


#### `git`

Version control system for tracking changes in code.

**Example:**
```bash
git clone repository_url
```

- `clone`: Clone a repository.
- `add`: Add file contents to the index.

## Exercises

### ðŸ§ª  Mini Project 1: File System Management Script

**Objective:** Create a script that organizes files in a directory, lists permissions, and performs basic operations.

:::details file_system_management.sh

```bash
#!/bin/bash

# Create a directory and navigate into it
mkdir project_files
cd project_files

# Create sample files
touch file1.txt file2.txt
mkdir sub_directory
touch sub_directory/file3.txt

# List files and permissions
echo "Listing files and permissions:"
ls -l

# Change permissions
chmod 755 file1.txt
chmod 644 file2.txt

# Display new permissions
echo "Updated permissions:"
ls -l

# Move files to the sub-directory
mv file1.txt sub_directory/
mv file2.txt sub_directory/

# Copy file3.txt to the main directory
cp sub_directory/file3.txt ./

# Remove the sub-directory and its contents
rm -r sub_directory

# Final file listing
echo "Files after operations:"
ls -l

# Cleanup
rm file*.txt
cd ..
rm -r project_files

:::

### ðŸ§ª  Mini Project 2: Basic Networking Script

**Objective:** Create a script that tests network connectivity and retrieves content from the web.

 :::details network_test.sh

```bash
#!/bin/bash

# Test network connectivity
echo "Pinging Google..."
ping -c 4 google.com

# Connect to a remote server via SSH
echo "Attempting SSH connection..."
# Replace 'username' and 'hostname' with actual values
ssh username@hostname

# Retrieve content from a website
echo "Downloading a file from example.com..."
wget https://example.com/file.txt

# Display the downloaded file content
echo "Content of file.txt:"
cat file.txt

# Cleanup
rm file.txt
````
:::

